{"version":3,"names":["React","_interopRequireWildcard","require","_reactNativeAudioRecorderPlayer","_chat","_services","_utils","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","default","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","useVoiceBar","props","onClickedRecordButton","onClickedClearButton","onClickedSendButton","onFailed","onState","propsOnState","state","setState","useState","voiceFilePathRef","useRef","voiceFileNameRef","voiceDurationRef","isPlayingRef","recordTimeoutRef","im","useChatContext","contentTimerRef","playRipple","setPlayRipple","AudioOptionRef","AudioEncoderAndroid","AudioEncoderAndroidType","AAC","AudioSourceAndroid","AudioSourceAndroidType","MIC","AVModeIOS","AVModeIOSOption","measurement","AVEncoderAudioQualityKeyIOS","AVEncoderAudioQualityIOSType","high","AVNumberOfChannelsKeyIOS","AVFormatIDKeyIOS","AVEncodingOption","aac","currentTime","setCurrentTime","onContentTimeChanged","useCallback","v","s","startRecord","voiceFilePath","_contentTimerRef$curr","_contentTimerRef$curr2","_contentTimerRef$curr3","_contentTimerRef$curr4","current","setTimeout","stopRecord","reset","start","Services","ms","startRecordAudio","url","audio","onPosition","pos","console","log","Math","floor","error","_contentTimerRef$curr5","_contentTimerRef$curr6","warn","reason","stop","onFinished","_ref","result","path","then","catch","_contentTimerRef$curr7","_contentTimerRef$curr8","_contentTimerRef$curr9","_contentTimerRef$curr10","clearTimeout","undefined","conv","getCurrentConversation","stopRecordAudio","uuid","localPath","LocalPath","sendVoice","dcs","getFileDir","convId","extension","getFileExtension","saveFromLocal","targetPath","replay","_contentTimerRef$curr11","_contentTimerRef$curr12","_contentTimerRef$curr13","_contentTimerRef$curr14","playAudio","playVoice","onPlay","_ref2","currentPosition","duration","_contentTimerRef$curr15","_contentTimerRef$curr16","_contentTimerRef$curr17","_contentTimerRef$curr18","_onClickedRecordButton","_onClickedClearButton","_contentTimerRef$curr19","_contentTimerRef$curr20","stopAudio","_onClickedSendButton","displayName","type","useEffect"],"sourceRoot":"../../../../src","sources":["biz/VoiceBar/VoiceBar.hooks.tsx"],"mappings":"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"}