{"version":3,"names":["_reactNativeChatSdk","require","_error2","_utils","_const","gListener","MessageCacheManagerImpl","constructor","client","console","log","_client","_userListener","Map","_sendList","_downloadList","_recallTimeout","init","unInit","onMessagesReceived","bindOnMessagesReceived","bind","onMessagesRead","bindOnMessagesRead","onGroupMessageRead","bindOnGroupMessageRead","onMessagesDelivered","bindOnMessagesDelivered","onMessagesRecalled","bindOnMessagesRecalled","onMessageContentChanged","bindOnMessageContentChanged","addListener","reset","removeListener","undefined","clear","key","listener","set","delete","emitSendMessageChanged","msg","forEach","v","_v$onSendMessageChang","onSendMessageChanged","call","emitSendMessageProgressChanged","_v$onSendMessageProgr","onSendMessageProgressChanged","emitSendMessageBefore","_v$onSendMessageBefor","onSendMessageBefore","emitRecallMessageBefore","_v$onRecallMessageBef","onRecallMessageBefore","emitRecallMessageChanged","params","_v$onRecallMessageRes","onRecallMessageResult","emitRecvMessageStateChanged","_v$onRecvMessageStatu","onRecvMessageStatusChanged","emitAttachmentChanged","_v$onMessageAttachmen","onMessageAttachmentChanged","emitAttachmentProgressChanged","_v$onMessageAttachmen2","onMessageAttachmentProgressChanged","emitConversationUnreadCountChanged","chatManager","getUnreadCount","then","count","_v$onAllConversationU","onAllConversationUnreadCountChanged","catch","messages","asyncTask","_v$onRecvMessage","onRecvMessage","_v$onRecvMessageStatu2","_groupMessageAcks","_v$onRecvMessageStatu3","tipMsg","createRecallMessageTip","insertMessage","message","onResult","_v$onRecvRecallMessag","onRecvRecallMessage","lastModifyOperatorId","_lastModifyTime","_v$onRecvMessageConte","onRecvMessageContentChanged","setCurrentConv","conv","setCurrentConversation","getCurrentConv","getCurrentConversation","sendMessageReadAck","result","isOk","hasReadAck","tmp","setMessageRead","convId","convType","msgId","hasRead","sendMessage","callback","onSuccess","isExisted","get","localMsgId","onProgress","progress","p","gMessageAttributeFileProgress","attributes","onError","_error","status","ChatMessageStatus","FAIL","resendMessage","tip","ChatMessage","createCustomMessage","conversationId","gCustomMessageRecallEventType","chatType","recall","JSON","stringify","text","self","userId","from","fromName","recallMessage","currentTimestamp","getCurTs","localTime","sendError","error","UIKitError","code","ErrorCode","msg_recall_error","value","orgMsg","downloadAttachment","body","type","ChatMessageType","IMAGE","VIDEO","FILE","VOICE","fileStatus","ChatDownloadStatus","FAILED","downloadMessageAttachment","loadHistoryMessage","startMsgId","loadCount","getHistoryMessage","direction","ChatSearchDirection","UP","setRecallMessageTimeout","recallTimeout","exports"],"sourceRoot":"../../../src","sources":["chat/messageManager.tsx"],"mappings":"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"}