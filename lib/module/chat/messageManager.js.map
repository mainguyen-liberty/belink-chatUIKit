{"version":3,"names":["ChatDownloadStatus","ChatMessage","ChatMessageStatus","ChatMessageType","ChatSearchDirection","ErrorCode","UIKitError","asyncTask","getCurTs","gCustomMessageRecallEventType","gMessageAttributeFileProgress","gListener","MessageCacheManagerImpl","constructor","client","console","log","_client","_userListener","Map","_sendList","_downloadList","_recallTimeout","init","unInit","onMessagesReceived","bindOnMessagesReceived","bind","onMessagesRead","bindOnMessagesRead","onGroupMessageRead","bindOnGroupMessageRead","onMessagesDelivered","bindOnMessagesDelivered","onMessagesRecalled","bindOnMessagesRecalled","onMessageContentChanged","bindOnMessageContentChanged","addListener","reset","removeListener","undefined","clear","key","listener","set","delete","emitSendMessageChanged","msg","forEach","v","_v$onSendMessageChang","onSendMessageChanged","call","emitSendMessageProgressChanged","_v$onSendMessageProgr","onSendMessageProgressChanged","emitSendMessageBefore","_v$onSendMessageBefor","onSendMessageBefore","emitRecallMessageBefore","_v$onRecallMessageBef","onRecallMessageBefore","emitRecallMessageChanged","params","_v$onRecallMessageRes","onRecallMessageResult","emitRecvMessageStateChanged","_v$onRecvMessageStatu","onRecvMessageStatusChanged","emitAttachmentChanged","_v$onMessageAttachmen","onMessageAttachmentChanged","emitAttachmentProgressChanged","_v$onMessageAttachmen2","onMessageAttachmentProgressChanged","emitConversationUnreadCountChanged","chatManager","getUnreadCount","then","count","_v$onAllConversationU","onAllConversationUnreadCountChanged","catch","messages","_v$onRecvMessage","onRecvMessage","_v$onRecvMessageStatu2","_groupMessageAcks","_v$onRecvMessageStatu3","tipMsg","createRecallMessageTip","insertMessage","message","onResult","_v$onRecvRecallMessag","onRecvRecallMessage","lastModifyOperatorId","_lastModifyTime","_v$onRecvMessageConte","onRecvMessageContentChanged","setCurrentConv","conv","setCurrentConversation","getCurrentConv","getCurrentConversation","sendMessageReadAck","result","isOk","hasReadAck","tmp","setMessageRead","convId","convType","msgId","hasRead","sendMessage","callback","onSuccess","isExisted","get","localMsgId","onProgress","progress","p","attributes","onError","_error","status","FAIL","resendMessage","tip","createCustomMessage","conversationId","chatType","recall","JSON","stringify","text","self","userId","from","fromName","recallMessage","currentTimestamp","localTime","sendError","error","code","msg_recall_error","value","orgMsg","downloadAttachment","body","type","IMAGE","VIDEO","FILE","VOICE","fileStatus","FAILED","downloadMessageAttachment","loadHistoryMessage","startMsgId","loadCount","getHistoryMessage","direction","UP","setRecallMessageTimeout","recallTimeout"],"sourceRoot":"../../../src","sources":["chat/messageManager.tsx"],"mappings":"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"}