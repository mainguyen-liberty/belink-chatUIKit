{"version":3,"names":["React","Dimensions","Pressable","useWindowDimensions","View","ChatDownloadStatus","ChatMessageType","useSafeAreaInsets","useChatContext","ErrorCode","UIKitError","useColors","Services","usePaletteContext","Icon","ImagePreview2","LocalPath","useImageSize","getImageSizeFromUrl","ImageMessagePreview","props","containerStyle","onBack","url","size","useImageMessagePreview","top","colors","getColor","icon","light","neutral","dark","createElement","style","flexGrow","justifyContent","alignItems","source","uri","imageStyle","width","get","height","position","left","onPress","name","tintColor","msgId","propsMsgId","onError","im","setUrl","useState","undefined","setSize","winWidth","winHeight","getImageSize","showImage","useCallback","_ref","isOk","onGetMessage","getMessage","messageId","then","result","body","type","IMAGE","code","chat_uikit","desc","isExisted","dcs","isExistedFile","localPath","remotePath","messageManager","downloadAttachment","catch","useEffect","listener","onMessageAttachmentChanged","msg","fileStatus","SUCCESS","FAILED","addListener","removeListener"],"sourceRoot":"../../../../src","sources":["biz/ConversationDetail/ImageMessagePreview.tsx"],"mappings":"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"}