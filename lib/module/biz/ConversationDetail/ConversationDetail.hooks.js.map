{"version":3,"names":["React","ChatConversationType","UIListenerType","useChatContext","usePermissions","useCreateConversationDirectory","MessageInput","MessageList","useConversationDetail","props","convId","convType","testMode","input","list","onClickedAvatar","propsOnClickedAvatar","permissionsRef","useRef","messageInputRef","messageListRef","_messageInputRef","ref","_MessageInput","render","messageInputProps","_messageListRef","_MessageList","messageListProps","convName","setConvName","useState","convAvatar","setConvAvatar","ownerIdRef","doNotDisturb","setDoNotDisturb","getPermission","createDirectoryIfNotExisted","im","messageManager","setCurrentConv","setConversation","useCallback","conv","getConversation","createIfNotExist","fromNative","console","log","PeerChat","GroupChat","getGroupInfo","groupId","onResult","result","isOk","value","_result$value","_result$value2","groupName","length","current","owner","groupAvatar","setConversationRead","onClickedSend","_messageListRef$curre","addSendMessage","onQuoteMessageForInput","model","_messageInputRef$curr","_messageInputRef$curr2","quoteMessage","call","onEditMessageForInput","_messageInputRef$curr3","_messageInputRef$curr4","editMessage","onEditMessageFinished","_messageListRef$curre2","_messageListRef$curre3","editMessageFinished","ownerId","useEffect","isSuccess","undefined","listener","onUpdatedEvent","data","onRequestRefreshEvent","id","onRequestReloadEvent","type","Conversation","addUIListener","removeUIListener","uiListener","onAddedEvent","Group"],"sourceRoot":"../../../../src","sources":["biz/ConversationDetail/ConversationDetail.hooks.tsx"],"mappings":"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"}